---
title: "Introduction to R and interactive programming"
author: "Marc, Sean, Bronson and Debbie"
date: "10/7/2015"
output: html_document
---

Welcome to the second course in our series of courses designed to help train Biologists who want to be able to analyze their own data.  This course will introduce you to the experience of using high level interactive programming languages and specifically: to R.  In this class we will be introducing you to the language as a tool that you can use to explore data.  The course after this will attempt to teach you enough to actually get started with writing your own scripts etc.

# Introduction to R

### Getting familiar with RStudio
First lets get you used to RStudio.  RStudio is one of the most popular tools for working with R today.  It normally has four main panels: 'Console', 'Source', 'Environment', and 'Files'.  Lets take a minute and look at each of these:

#### Console panel:
This panel is your actual R console.  This panel is basically what you would see if you were to run R at the command line without any of the RStudio bells and whistles.

#### Source panel:
The Source panel is where you can edit scripts and markdown documents etc.  It's primary function is to be a text editor.  You can use any text editor that you like to write R, but this one is nice because it comes pre-configured with sensible defaults for source code highlighting.  This makes it easier to read your source code.  Also convenient: if you highlight a command and then hit CTRL-ENTER keys, it will send the highlighted text directly to the console to be executed.

#### Environment panel:
This panel is where you will see important details about your R session.  Any local variables will be shown here, and there is also a tab to see your command history.  This can be convenient if you are debugging or need to look at what is in a local object.

#### Files panel:
The Files panel has many tabs.  The Files tab will let you look at the files in the current working directory.  And the plots tab is where RStudio will draw plots that you generate. The Packages tab will let you browse installed packages to look at their helpful vignettes, and the help tab is where RStudio will render manual pages that you open.  The Viewer tab has a similar role to the plots tab, except that it's usually used for looking at interactive shiny widgets when using RStudio.


### What the heck is 'R'

R is the free and open source version of another language called 'S' which was the original 'statistical' language. Today it is more popular and widely used than ever for doing statistics and data modeling.  If you want to learn a language to do data analysis or science: you should consider learning R.  R is often called a "high level" language, which is another way of saying that it's more human friendly than a lot of other "low level" languages.  And R already has a large existing collection of friendly and powerful software packages that you can harness to do useful work.


#### Sample objects

Some R objects are always available for demonstration.  An example of this is the `LETTERS` character vector.  These crop up in examples, but here I am going to use it just to show you what a character vector looks like.

```{r}
LETTERS
```

Please notice a couple of things about this.  The 1st is that this is a vector of character elements.  But the 2nd is that there is a report at the start of each line to indicate which element number you are looking at...

#### This is because in R: Vectors are atomic

Because R is a statistical language, the vectors are atomic.  What does that mean?  It means that in R there is no such thing as an object container that is only able to hold a single value.  The smallest container in R is still a vector.  


#### Assignment operators 

Now lets consider the case where we want to assign a simple variable.  In R there are TWO different symbols used as assignment operators.  I will demonnstrate each of them below:

```{r}
foo <- "yes"
bar = "no"
```

Now lets look at the value for `foo`

```{r}
foo
```

Now you might be wondering: why would I have more than one way to assign values?  What is the difference between `=` and `<-`? Hold that thought. Because the next section should shed some light on this...


### Calling functions
Now lets talk about basic R functions.  Languages like R use functions as a shortcut for doing specific sets of instructions over and over again.  And R has no shortage of helpful functions right out of the box.  But before you start using them there are a few things you might want to know.  This section will attempt to set you up for success.

One of the simplest functions in R is the help function.    The help function only requires one argument to use and that is the topic you would like to look up information on.  Lets call it now to look up the man page for another function called `grepl`:

```{r, eval=FALSE}
help('grepl')
```

If you look at this help page, you will notice that the `grepl` function can take multiple different arguments.  But it always requires at least two arguments.  You know this beccause there are not default arguments set for the first two arguments when looking at its 'Usage' statement.  Reading further in the manual page, you should notice that it's role is to return a logical vector indicating where the 1st argument matched the contents of the second argument.  But in terms of passing these arguments to the function: R is pretty flexible about how it will interpret your attempts to call a function.


#### Arguments can be passed in "in order"

The quickest way to get R to do this is to just pass in the correct arguments in the correct order like this:

```{r}
grepl('A', LETTERS)
```

But this assumes that you remember the exact order that the arguments were designated in the original function, and that you pass them in in that exact same order.  This method is faster in the sense that it requires less typing.

#### Alternatively, arguments can be passed in by name

Sometimes instead you may wish to be more explicit and actually refer to the function arguments by name.  In that case, you can call the function like this:

```{r}
grepl(x=LETTERS, pattern='A')
```

Notice how I did not have to list the arguments in order this time?  This is a good approach if you are unsure about the order, but it is also a good idea for writing code that is more robust over time.  This method requires more typing, but in the event that someone changes the function you are calling, this method is more likely to keep working.  So this method is more a more robust way to write scripts and functions.

Also please notice the use of the `=` sign to indicate argument names.  This is the reason why a lot of people prefer to type `<-` for assignment operations instead of `=`.  Because if you use `<-` instead of `=`, it meanns that you can do an assignment right in the middle of a function call (which is sometimes convenient).


#### You can also use as a mixture of named and un-named arguments.

But once you start using named arguments in your function call, you had better stick with it.  This is because R can only guess the un-named arguments if they are still in the correct order left to right.  R is pretty smart, but it can't actually read your mind.

```{r}
grepl('A', x=LETTERS)
```




### Using external libraries

Part of what makes R so powerful is the way that it leverages the code of an entire community of other software engineers.  It can do this because R makes it very straightforward to make or use external package libraries.  An external package library is just a collection of R functions and objects that do something useful.  To use an external package all you need to do is to load it with the library command.  Here is how you can load the MASS package:

```{r}
library("stats4")
```

Now that you have loaded a package, lets talk about the search path.  The search path is how R keeps track of everything that you have loaded into memory.  You can look at it by just calling the `search` command.  

```{r}
search()
```

This will print all the libraries/packages that your current R session has loaded as a single character vector.  This is an important thing to pay attention to since every time you add a new package to the search path, it adds another set of objects, functions and symbols for R to look at everytime you ask it to do something.  So your code will run faster if you load fewer things onto that path.

To see the symbols in any elemnent of the search path, you can use the list objects or `ls` command.  The `ls` command can either take an index value like this:

```{r}
ls(2)
```

Or you can just look at the exact element by passing in a character string explicitly like this:
```{r}
ls("package:stats4")
```



### Atomic vectors and other fun Data structures
Because R is a data centric statistical language it has a lot of fun ways to represent data.

#### Vectors, length

So we already talked about how vectors are the most basic data structure in R.  What we didn't spend as much time on is that they come in different flavors or classes.  You can see what class a vector is by passing it to the class() function like this:

```{r}
class(LETTERS)
```

```{r}
class(pi)
```

The most common types of vectors are: character, numeric, logical, and integer.  Another important function is length().  You can always use length to see how many elements are in a vector.  For example:

```{r}
length(LETTERS)
```

There are 26 letters in the alphabet


#### Lists

Sometimes you want to put more than just one flavor of data into a vector like object.  For those times you need a much more flexible kind of container.  That is what lists are for.  Lets look an an example of a list:

```{r}
lst <- list(a=1, b='foo')
lst
```

And this allows us to put pretty much anything into our list.  So in this very simple example, we have placed a character vector and a numeric vector.  But we could also have placed a large range of different object types.  And as with vectors, you have a length function you can call:

```{r}
length(lst)
```


#### data.frames, matrices, dim

Now lets introduce matrices and data.frames




#### S4 objects



#### __Exercise R2:__ 





### Getting data into R 

#### read.table
One of the most common tools for reading data into R is the read.table command.  And actually, it's a family of commands.  If you look at the man page you will see a whole set of related commands.
```{r}
?read.table
```

The `read.table` command and it's friends are a good introduction to how you can load a popular kind of data format into R.  Specifically tabular data.


```{r}
```



#### scan
Sometimes you need to get data in at a more primitive level.  `scan` will let you do that and reads files in one line at a time.

```{r}
```


#### Other options: Databases, URIs, REST, HDF5 and many more

R also has a ton of alternate commands for reading in all manner of other file formats as R objects.  This topic could almost become it's own course.  Some popular options include, databases URIs, REST apis, HDF5 files (just to name a few).  Many of these capabilities are not baked in to base R but are instead available via packages.  Here is an example of the DBI interface which is useful for extracting data from a database file.  


```{r}
library(DBI)
```



#### __Exercise R3:__ 



### Getting help 
If you forget everything else we teach you today, I want to make sure that you know how and where to look for help. The next set of topics will cover that because R has a large number of ways that new users can get assistance for learning about it.

#### Man pages
The manual page is usually the first place you will look if you are wondering what an R command will do.  R man pages will explain both what something is, and how to use it  You can usually pull up a manual page for a command by typing `?` followed by the command.  Like this:

```{r, eval=FALSE}
?data.frame
```

However a good habit is to wrap the thing you want help on in quotes like this:

```{r, eval=FALSE}
?'data.frame'
```

Why?  Because those quotes will allow you to search for help on strings that have special characters like dashes in them.  Why would you want to do that when this is not allowed for function names?  Consider the following:

```{r, eval=FALSE}
 ?'GenomicRanges-class'
```

The above will take you to the help page for the GenomicFeatures S4 class.  It's a very useful man page, but you can't get there if you leave out the quotes.

Alternatively, you could choose to just use the `help` command.  But that is three extra letters of typing (and you would still have to quote the arguement)...

##### example()
One of the more useful (and often overlooked) functions for exploring a new function is the `example` function.  The `example` function takes advantage of the fact that most man pages have an example section.  So if instead of calling `help`, you call `example`, the examples from the corresponding manual page will be run for you in your R session.

```{r}
example('data.frame')
```



#### vignettes
One step up from manual pages are vignettes.  There are two kinds of vignettes for any R package.  One is the automatically generated kind.  This kind consists of all the manual pages collated together under a table of contents.  This kind of vignette is not especially useful.  The second kind of vignette though is very useful.  This second kind of vignette gives an overview of how the various kinds of functions and objects were intended to be used.  Many of the best R packages will contain this second, more useful kind of vignette.  When they are available, these are a great way to see what the package authors intention was.

#### Workflows
Sometimes communities will organize around a series of packages that work well together (usually not an accident).  When this happens you can sometimes find another kind of document to explain how these different packages are best used together.  This is called a workflow, and it's a great place to start if you are looking to learn about a new set of tools.

#### Forums
All software has bugs.  But open sourced software often will allow you to write to a community of like minded users (which often includes the package authors) to get help.  There are many valuable forums where you can get questions answered about software.  Always search first though.  Most of the time you will find that someone else has already asked your question and gotten an answer.

#### Cheat sheets
One of the most challenging things for new users of R is not getting help on commands that they know about.  It's usually knowing what the command is called in the first place (so that you can start to look for some help about it).  A number of R 'cheat sheets' are available online that can help with this problem.  Here is one of the more popular ones:

```
https://cran.r-project.org/doc/contrib/Short-refcard.pdf
```
 
This cheat sheet is valuable enough for new students that I plan to give you a copy of this cheat sheet, but there are many, many others on the web that cover a range of topics...


#### __Exercise RX:__ 

Go look up the help page for the `help.start` function.  Now actually use that function to explore some package vignettes and man pages in one simple interface.  If this wasn't working, you might need to launch a vignette using `openVignette` or to look at a man page using `help`.  Find an example package and explore each of these.



### Data object management
#### class()
#### as.list() and friends
#### subsetting operators [] vs [[]]
#### data casting
#### match(), %in%, unique()

#### __Exercise R4:__ 


### Flow control
#### if, else
#### switch


#### __Exercise R5:__ 


### Exploring packages
#### CRAN 
#### Bioconductor
#### github


### Bioconductor
#### Walkthroughs, vignettes and man pages.






